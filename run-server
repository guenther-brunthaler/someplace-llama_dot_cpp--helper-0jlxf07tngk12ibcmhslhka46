#! /bin/sh

# v2025.58
listen_port=12345

set -e
trap 'test $? = 0 || echo "\"$0\" failed!" >& 2' 0

while getopts '' opt
do
	case $opt in
		*) false || exit
	esac
done
shift `expr $OPTIND - 1 || :`

host=`hostname`
test "$host"

# Will be killed by ^C together with the script.
socat TCP4-LISTEN:$listen_port,bind="$host",reuseaddr,fork \
	TCP4:127.0.0.1:8080 &

test $# = 1
test -f "$1"

llama-server -m "$1"
